(this.webpackJsonpviewer=this.webpackJsonpviewer||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(2),c=n(0),s=n.n(c),u=n(4),i=n.n(u),l=n(5);var d={Button:function(e){var t=e.data,n=e.style,a=e.onClick;return console.log("React rendering Button"),s.a.createElement("button",{type:"button",style:n,onClick:a},t.text)},Iframe:function(e){var t=e.id,n=e.data,a=e.style;console.log("React rendering Iframe");var r=new URL(n.src);return n.params&&Object.keys(n.params).forEach((function(e){r.searchParams.set(e,n.params[e])})),r.searchParams.set("id",t),s.a.createElement("iframe",{src:r.href,title:n.title,style:a})},Image:function(e){var t=e.data,n=e.style;return console.log("React rendering Image"),s.a.createElement("img",{src:t.src,alt:"",style:n})},Input:function(e){var t=e.data,n=e.style,a=e.onChange;return console.log("React rendering Input"),s.a.createElement("input",{onChange:a,style:n,value:t.value})},Remote:function(e){var t=e.data;return s.a.createElement("div",null,t.src)},Text:function(e){var t=e.data;return console.log("React rendering Text"),s.a.createElement("span",null,t.text)}};function f(e){var t,n,a=e.item,r=e.structure,o=d[a.type],u=Object(c.useState)(!1),i=Object(l.a)(u,2),f=i[0],m=i[1];return r.setRenderer(a.id,(function(){return m(!f)})),s.a.createElement("div",{style:(n=a.layout,{position:"absolute",top:n.y,left:n.x,width:n.width}),id:a.id},s.a.createElement(o,Object.assign({},a,{style:(t=a.layout,{width:t.width,height:t.height})})))}var m=function(e){var t=e.structure;console.log("React rendering Renderer");var n=Object.values(t.getItems());return s.a.createElement("div",{id:"renderer"},n.map((function(e){return s.a.createElement(f,{key:e.id,item:e,structure:t})})))};var v=function(e){var t=new Worker("worker.js");t.postMessage({command:"init",itemsMap:e.getItems(),codeUrl:"/code.js"}),function(e,t){Object.values(e.getItems()).filter((function(e){return"Input"===e.type})).forEach((function(n){n.onChange=function(a){var r=a.currentTarget.value;e.setData(n.id,"data",{value:r}),t.postMessage({command:"setData",id:n.id,data:n.data})}}))}(e,t);return new Promise((function(n){t.onmessage=function(a){var r=a.data;console.log("worker to main:",r.command),"userCodeRan"!==r.command?function(t,n,a){({setData:function(){e.setData(t,"data",n.overrideData)},setLayout:function(){e.setData(t,"layout",n.overrideLayout)},setOnClick:function(){e.setEventListener(t,"onClick",(function(){a({command:"callback",callbackId:n.callbackId})}))}})[n.command]()}(r.selector.substring(1),r,(function(e){t.postMessage(e)})):n()}}))},g=function(e){window.addEventListener("message",(function(t){var n=t.data.payload;(null===n||void 0===n?void 0:n.id)&&{setLayout:function(){e.setData(n.id,"layout",n.overrideLayout)}}[n.command]()}))};var p=function(e){var t={},n=function(e){if(!t[e])return n="no renderer for id",a=e,void console.log("%c".concat(n,": %c").concat(a),"color: #bada55","color: red");var n,a;t[e]()};return{setRenderer:function(e,n){t[e]=n},setData:function(t,a,r){var o=e[t];o&&(Object.assign(o[a],r),n(t))},setEventListener:function(t,a,r){var o=e[t];o&&(o[a]=r,n(t))},getItems:function(){return e}}};n(12);function y(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/structure.json",e.next=3,y("/structure.json");case 3:return t=e.sent,n=p(t),g(n),e.next=8,v(n);case 8:i.a.render(s.a.createElement(m,{structure:n}),document.getElementById("root"));case 9:case"end":return e.stop()}}),e)})))()},6:function(e,t,n){e.exports=n(13)}},[[6,1,2]]]);
//# sourceMappingURL=main.17126df6.chunk.js.map