(this.webpackJsonpviewer=this.webpackJsonpviewer||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(2),c=n(0),i=n.n(c),s=n(4),u=n.n(s),d=n(5);function l(e){var t={};return e.width&&(t.width="".concat(e.width,"px")),e.height&&(t.height="".concat(e.height,"px")),t}var f={Button:function(e){var t=e.data,n=e.style,r=e.onClick;return console.log("Button"),i.a.createElement("button",{type:"button",style:n,onClick:r},t.text)},Iframe:function(e){var t=e.id,n=e.data,r=e.style;console.log("Iframe");var a=new URL(n.src);return n.params&&Object.keys(n.params).forEach((function(e){a.searchParams.set(e,n.params[e])})),a.searchParams.set("id",t),i.a.createElement("iframe",{src:a.href,title:n.title,style:r})},Image:function(e){var t=e.data,n=e.style;return console.log("Image"),i.a.createElement("img",{src:t.src,alt:"",style:n})},Remote:function(e){var t=e.data,n=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.text());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){n(t.src).then((function(e){}))})),i.a.createElement("div",null,t.src)},Text:function(e){var t=e.data;return console.log("Text"),i.a.createElement("span",null,t.text)}};function m(e){var t,n=e.item,r=e.rerender,a=f[n.type],o=Object(c.useState)(!1),s=Object(d.a)(o,2),u=s[0],m=s[1];return r.add(n.id,(function(){return m(!u)})),i.a.createElement("div",{style:(t=n.layout,{position:"absolute",top:"".concat(t.y,"px"),left:"".concat(t.x,"px")}),id:n.id},i.a.createElement(a,Object.assign({},n,{style:l(n.layout)})))}var p=function(e){var t=e.items,n=e.rerender;return console.log("Renderer"),i.a.createElement("div",{id:"renderer"},t.map((function(e){return i.a.createElement(m,{key:e.id,item:e,rerender:n})})))};function v(e,t){console.log("%c".concat(e,": %c").concat(t),"color: #bada55","color: red")}var g=function(e,t){var n=function(n,r,a){var o=e[n];if(o){var c={setData:function(){Object.assign(o.data,r.overrideData)},setLayout:function(){Object.assign(o.layout,r.overrideLayout)},setOnClick:function(){o.onClick=function(){a({command:"callback",callbackId:r.callbackId})}}};if(!c[r.command])return console.log(r),void v("no such command",r.command);c[r.command](),t.rerender(o.id)}};return new Promise((function(t){window.addEventListener("message",(function(t){var r,a=t.data,o=t.origin;if(null===a||void 0===a||null===(r=a.payload)||void 0===r?void 0:r.id){var c=e[a.payload.id];if(c)new URL(c.data.src).origin===o&&n(c.id,a.payload,(function(e){window.postMessage(e,o)}))}}));var r=new Worker("worker.js");r.onmessage=function(e){var a=e.data;console.log("worker to main",a),"userCodeRan"!==a.command?n(a.selector.substring(1),a,(function(e){r.postMessage(e)})):t()},r.postMessage({command:"init",itemsMap:e,codeUrl:"/code.js"})}))};n(12);function h(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(){var e={};return{add:function(t,n){e[t]=n},rerender:function(t){e[t]?e[t]():v("no renderer for id",t)}}}();function w(e){u.a.render(i.a.createElement(p,{items:Object.values(e),rerender:b}),document.getElementById("root"))}Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/structure.json",e.next=3,h("/structure.json");case 3:return t=e.sent,e.next=6,g(t,b);case 6:w(t);case 7:case"end":return e.stop()}}),e)})))()},6:function(e,t,n){e.exports=n(13)}},[[6,1,2]]]);
//# sourceMappingURL=main.452ef197.chunk.js.map